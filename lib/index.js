const moment = require('moment')

// 周六周日需要上班
const workdays = {
  "2019-02-02": 1,
  "2019-02-03": 1,
  "2019-04-28": 1,
  "2019-05-05": 1,
  "2019-09-29": 1,
  "2019-10-12": 1,

  "2020-01-19": 1,
  "2020-02-01": 1,
  "2020-04-26": 1,
  "2020-05-09": 1,
  "2020-06-28": 1,
  "2020-09-27": 1,
  "2020-10-10": 1
}

// 工作日放假
const holidays = {
  "2019-01-01": 1,
  "2019-02-04": 1,
  "2019-02-05": 1,
  "2019-02-06": 1,
  "2019-02-07": 1,
  "2019-02-08": 1,
  "2019-04-05": 1,
  "2019-05-01": 1,
  "2019-05-02": 1,
  "2019-05-03": 1,
  "2019-06-07": 1,
  "2019-09-13": 1,
  "2019-10-01": 1,
  "2019-10-02": 1,
  "2019-10-03": 1,
  "2019-10-04": 1,
  "2019-10-07": 1,

  "2020-01-01": 1,
  "2020-01-24": 1,
  "2020-01-27": 1,
  "2020-01-28": 1,
  "2020-01-29": 1,
  "2020-01-30": 1,
  "2020-04-06": 1,
  "2020-05-01": 1,
  "2020-05-04": 1,
  "2020-05-05": 1,
  "2020-06-25": 1,
  "2020-06-26": 1,
  "2020-10-01": 1,
  "2020-10-02": 1,
  "2020-10-05": 1,
  "2020-10-06": 1,
  "2020-10-07": 1,
  "2020-10-08": 1
}

/**
 * 是否是节假日
 * m: moment支持的时间格式
 */
function isChineseHoliday(m) {
  m = moment(m)

  const day = m.day()
  const date = m.format('YYYY-MM-DD')

  // 周末周六
  if (day === 0 || day === 6) {
    return !workdays[date]
  } else {
    return !!holidays[date]
  }
}

module.exports = isChineseHoliday